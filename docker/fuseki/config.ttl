# Licensed under the terms of http://www.apache.org/licenses/LICENSE-2.0

@prefix :        <#> .
@prefix fuseki:  <http://jena.apache.org/fuseki#> .
@prefix rdf:     <http://www.w3.org/1999/02/22-rdf-syntax-ns#> .
@prefix rdfs:    <http://www.w3.org/2000/01/rdf-schema#> .
@prefix ja:      <http://jena.hpl.hp.com/2005/11/Assembler#> .
@prefix tdb:     <http://jena.hpl.hp.com/2008/tdb#> .
@prefix spatial: <http://jena.apache.org/spatial#> .

spatial:SpatialIndexLucene  rdfs:subClassOf  spatial:SpatialIndex .

[] a fuseki:Server ;
    fuseki:services ( <#service1> ) ;
    .

<#service1> a fuseki:Service ;
    fuseki:name                         "ds" ;
    fuseki:serviceQuery                 "sparql" ;
    fuseki:serviceQuery                 "query" ;
    fuseki:serviceUpdate                "update" ;
    fuseki:serviceUpload                "upload" ;
    fuseki:serviceReadWriteGraphStore   "data" ;
    fuseki:serviceReadGraphStore        "get" ;
    fuseki:dataset                      <#spatial_dataset> ;
    .

<#dataset> a ja:RDFDataset ;
    ja:defaultGraph <#model_inf> ;
    .
    
<#tdbDataset> a tdb:DatasetTDB ;
    tdb:location "/fuseki/fuseki-db" .
    
<#spatial_dataset> a spatial:SpatialDataset ;
    spatial:dataset <#dataset> ;
    spatial:index <#index> ;
    .
    
<#index> a spatial:SpatialIndexLucene ;
    spatial:directory <file://fuseki/Lucene> ;
    spatial:definition <#definition> ;
    .
    
<#definition> a spatial:EntityDefinition ;
    spatial:entityField  "uri" ;
    spatial:geoField     "geo" ;
    .

<#model_inf> a ja:InfModel ;
    ja:baseModel [
        a tdb:GraphTDB ;
        tdb:dataset <#tdbDataset> ;
    ];
    ja:content [
        ja:externalContent <file:////fuseki/content/semiot.ttl> ;
        #ja:externalContent <file:////fuseki/content/qudt-unit.owl> ;
        #ja:externalContent <file:////fuseki/content/qudt-quantity.owl> ;
        #ja:externalContent <file:////fuseki/content/qudt.owl> ;
        #ja:externalContent <file:////fuseki/content/qudt-quantity-ext.owl> ;
    ];
    ja:reasoner [
        ja:reasonerURL <http://jena.hpl.hp.com/2003/RDFSExptRuleReasoner> ;
    ];
    .
